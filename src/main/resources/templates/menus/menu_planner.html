<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <script
            src="https://code.jquery.com/jquery-3.3.1.min.js"
            integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
            integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
            crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
            integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
            crossorigin="anonymous"></script>
    <!-- Custom styles for this template -->
    <link href="../static/css/navbar.css" th:href="@{/css/navbar.css}" rel="stylesheet">

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
          integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

    <script type="text/javascript" src="../../static/js/dncalendar.min.js" th:src="@{/js/dncalendar.js}"></script>
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="../../static/css/dncalendar-skin.min.css"
          th:href="@{/css/dncalendar-skin.css}">

    <script type="text/javascript">
        $(function () {
            var my_calendar = $("#dncalendar-container").dnCalendar({
                dataTitles: {defaultDate: 'Activo', today: 'Hoy'},
                dayClick: function (date, view) {
                    var month = date.getMonth() + 1;
                    my_calendar.update({
                        defaultDate: date.getFullYear() + "-" + month + "-" + date.getDate()
                    });
                    // callApi(date);
                    callMenuApi(date);
                }
            });
            my_calendar.build();
            my_calendar.update({
                monthNames: ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre",
                    "Octubre", "Noviembre", "Diciembre"],
                dayNames: ['Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado', 'Domingo'],
                startWeek: 'Monday'
            });
        });

        function callMenuApi(date) {
            var month = date.getMonth() + 1;
            var mm = Array(2 - String(month).length + 1).join('0') + month;
            var menuDate = date.getFullYear() + mm + date.getDate();
            $('#collapseExample').collapse('hide');
            $("#form").load('/api/menus', 'menuId=' + menuDate);
        }
    </script>
</head>
<body>
<div th:replace="general.html :: navbar"></div>
<div class="container-fluid">
    <div class="collapse show" id="collapseExample">
        <div class="row justify-content-center">
            <div class="col-sm-5">
                <div id="dncalendar-container" class="container"></div>
            </div>
        </div>
    </div>
    <div class="row justify-content-center">

        <a href="#" class="badge badge-info" data-toggle="collapse" data-target="#collapseExample"
           aria-expanded="true" aria-controls="collapseExample"><i class="far fa-calendar-alt fa-2x"></i>
        </a>
    </div>
    <br/>
    <div class="row justify-content-center">
        <div class="col">
            <div class="card">
                <div class="card-header">
                    <div class="row align-items-center">
                        <div class="col-11">
                            <h5>Inventario</h5>
                        </div>
                    </div>
                </div>
                <div th:fragment="content" id="form">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-3">
                                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist"
                                     aria-orientation="vertical">
                                    <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill"
                                       href="#v-pills-home" role="tab" aria-controls="v-pills-home"
                                       aria-selected="true" th:remove="all">Home</a>
                                    <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill"
                                       href="#v-pills-profile" role="tab" aria-controls="v-pills-profile"
                                       aria-selected="false" th:remove="all">Profile</a>

                                    <a data-toggle="pill"
                                       role="tab"
                                       aria-selected="false"
                                       th:class="${stat.index == 0?'nav-link active':'nav-link'}"
                                       th:each="cat, stat : ${categories}"
                                       th:text="${cat.name}"
                                       th:id="${cat.name+'-tab'}"
                                       th:href="${'#'+cat.name+'-tabContent'}"
                                       th:attr="aria-controls=${cat.name+'-tabContent'}"></a>

                                </div>
                            </div>
                            <div class="col-9">
                                <div class="tab-content" id="v-pills-tabContent">
                                    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel"
                                         aria-labelledby="v-pills-home-tab" th:remove="all">...
                                    </div>
                                    <div class="tab-pane fade" id="v-pills-profile" role="tabpanel"
                                         aria-labelledby="v-pills-profile-tab" th:remove="all">...
                                    </div>
                                    <div role="tabpanel"
                                         th:each="cat,stat : ${categories}"
                                         th:class="${stat.index == 0?'tab-pane fade show active':'tab-pane fade'}"
                                         th:id="${cat.name+'-tabContent'}"
                                         th:attr="aria-labelledby=${cat.name+'-tab'}">
                                        <p th:text="${menu.id}"></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>